[gd_scene load_steps=7 format=3 uid="uid://it1n1qhtj542"]

[ext_resource type="PackedScene" uid="uid://buiprln41cfpx" path="res://prefabs/player.tscn" id="1_43qf2"]
[ext_resource type="Script" path="res://scripts/player.gd" id="2_mt1bp"]
[ext_resource type="PackedScene" uid="uid://co2m4q67sc6ft" path="res://prefabs/Background.tscn" id="3_we4tt"]
[ext_resource type="PackedScene" uid="uid://bxqsfykh2dtrj" path="res://prefabs/HungerBar.tscn" id="4_j1ccm"]
[ext_resource type="Texture2D" uid="uid://dv6x8qw212dqt" path="res://Textures/dirtpile.png" id="5_v1g02"]

[sub_resource type="GDScript" id="GDScript_uyv7r"]
script/source = "extends Node2D

@export var food_scene: PackedScene
@export var spawn_radius: float = 200.0
@export var spawn_interval: float = 2.0

@onready var player = $\"../player\"

func _ready():
	if not food_scene:
		print(\"⚠️ No Food scene assigned in Inspector!\")
		return

	# spawn one immediately to test
	spawn_food()

	# spawn repeatedly
	var t = Timer.new()
	t.wait_time = spawn_interval
	t.autostart = true
	t.timeout.connect(spawn_food)
	add_child(t)

func spawn_food():
	var food = food_scene.instantiate()
	add_child(food)

	# Pick a random angle around the player
	var angle = randf() * TAU
	var offset = Vector2(cos(angle), sin(angle)) * spawn_radius
	food.global_position = player.global_position + offset

	# Give the food a reference to the player
	food.player = player

	print(\"✅ Spawned food at \", food.global_position)
"

[node name="game" type="Node2D"]
script = SubResource("GDScript_uyv7r")

[node name="player" parent="." instance=ExtResource("1_43qf2")]
position = Vector2(576, 648)
script = ExtResource("2_mt1bp")

[node name="Background" parent="." instance=ExtResource("3_we4tt")]

[node name="HungerBar" parent="." instance=ExtResource("4_j1ccm")]

[node name="SpawnSprite" type="Sprite2D" parent="."]
position = Vector2(576, 616)
scale = Vector2(1.7, 2.7)
texture = ExtResource("5_v1g02")
